{% extends 'base.html' %}
{% load static %}

{% block extra_head %}
	<title>Update {{tab | capfirst }} | {{ space.name }}</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/space/manage/index.css'%}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/space/manage/update.css'%}">
{% endblock %}


{% block extra_content %}
    <div class="container-fluid mt-3">
        <div class="row justify-content-center">
            <div class="col-md-3 mb-3">
                <div>
                    <h4 class="list-group-item bg-secondary text-white">Update</h4>
                    {% if tab == 'information' %}
                        <a href="/space/{{space.name}}/update/?tab=information" class="list-group-item active">Information</a>
                        <a href="/space/{{space.name}}/update/?tab=banner" class="list-group-item">Banner</a>
                    {% else %}
                        <a href="/space/{{space.name}}/update/?tab=information" class="list-group-item">Information</a>
                        <a href="/space/{{space.name}}/update/?tab=banner" class="list-group-item active">Banner</a>
                    {% endif %}
                </div>
            </div>
            <div class="col-md-7">
                {% if tab == 'banner' %}
                    {% for banner in banners %}
                        <div class="list-group-item banner-container">
                            <img src="{{banner.location}}" id="banner-{{forloop.counter}}">
                            <form id="form-{{forloop.counter}}">
                                {% csrf_token %}
                                <label for="banner-{{forloop.counter}}-input" class="btn btn-outline-secondary pickers">Choose</label>
                                <input type="text" name="what" value="banner" class="d-none">
                                <input type="text" name="current" value="{{banner.uid}}" class="d-none">
                                <input type="text" name="space" value="{{space.name}}" class="d-none">
                                <input type="text" name="token" value="{{token}}" class="d-none">
                                <input type="file" id="banner-{{forloop.counter}}-input" name="image" class="d-none" onchange="previewImage(event, '#banner-{{forloop.counter}}', '#banner-{{forloop.counter}}-uploader')" accept=".png, .jpg, .jpeg">
                                <button type="button" class="btn btn-success uploader" onclick="upload(this.id, 'form-{{forloop.counter}}')" id="banner-{{forloop.counter}}-uploader">Save</button>
                            </form>
                        </div>
                    {% endfor %}
                {% else %}
                    <form method="POST">
                        {% csrf_token %}
                        <div class="list-group-item">
                            {{ form}}
                        </div>
                        <button type="submit" class="btn btn-success btn-block">Update</button>
                    </form>
                {% endif %}
                <br>
                <a href="/space/{{space.name}}/" class="list-group-item list-group-item-action">Back to Space</a>
                <br>
            </div>
        </div>
    </div>
{% endblock %}


{% block extra_script %}
    {% if tab == 'banner' %}
        <script type="text/javascript" src="{% static 'js/generic/image-handler.js' %}"></script>
        <script type="text/javascript" src="{% static 'js/space/manage/update.js' %}"></script>
    {% endif %}
{% endblock %}